
<!DOCTYPE html>
<html lang="">


<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#303030"/>
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <script src="/js/busuanzi.pure.mini.js" async></script>
  
  
    <meta name="keywords" content="Emberjs,Ember-Teach,Ember-Model," />
  

  
    <meta name="description" content="ä¸€ä¸ªä¸“æ³¨ä¸€codingçš„ç½‘ç«™ã€‚æä¾›ä¸°å¯Œç¼–ç¨‹çŸ¥è¯†ï¼ŒåŒ…æ‹¬Springã€Javaã€EmberJSã€SpringBootç­‰ç­‰æŠ€æœ¯ã€‚" />
  
  
  <link rel="icon" type="image/x-icon" href="/image/favicon.ico">
  <title>modelç®€ä»‹</title>
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="/css/pure-min.css">
    
      <link rel="stylesheet" href="/css/xoxo.css">
    
  
<meta name="generator" content="Hexo 5.0.2"><link rel="alternate" href="/atom.xml" title="null" type="application/atom+xml">
</head>

<body>
  <div class="nav-container">
    <nav class="home-menu pure-menu pure-menu-horizontal">
  <a class="pure-menu-heading" href="/">
    <img class="avatar" src="/image/favicon.ico">

  </a>

  <ul class="pure-menu-list clearfix">
  	<li class="pure-menu-item">
		<div class="dropdown">
		    <a href="#" class="dropbtn pure-menu-link">
				<svg t="1676518966583" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5406" width="48" height="48"><path d="M863.475712 157.964288C768.909312 63.397888 643.176448 11.317248 509.44 11.317248S249.970688 63.397888 155.404288 157.964288C60.837888 252.530688 8.757248 378.263552 8.757248 512s52.08064 259.469312 146.64704 354.035712c94.5664 94.5664 220.297216 146.644992 354.035712 146.644992 133.736448 0 259.469312-52.08064 354.035712-146.644992S1010.122752 645.736448 1010.122752 512s-52.08064-259.469312-146.64704-354.035712zM509.44 971.722752C255.9488 971.722752 49.717248 765.4912 49.717248 512c0-253.4912 206.231552-459.722752 459.722752-459.722752 253.4912 0 459.722752 206.231552 459.722752 459.722752 0 253.4912-206.231552 459.722752-459.722752 459.722752z" fill="#ffffff" p-id="5407"></path><path d="M189.46048 459.689984h104.620032v104.620032H189.46048zM724.287488 459.689984h105.13408v104.620032h-105.13408zM466.343936 459.689984h104.62208v104.620032h-104.62208z" fill="#ffffff" p-id="5408"></path></svg>
			</a>
		    <div class="dropdown-content">
		      
		          
		            
						<a href="/" class="pure-menu-link">
							é¦–é¡µ
						</a>
					
		          
		      
		          
		            
						<a href="/search" class="pure-menu-link">
							æœç´¢
						</a>
					
		          
		      
		          
		            
						<a href="/tags" class="pure-menu-link">
							æ ‡ç­¾
						</a>
					
		          
		      
		          
		            
						<a href="/archives" class="pure-menu-link">
							å½’æ¡£
						</a>
					
		          
		      
		          
		            
						<a href="/atom.xml" class="pure-menu-link">
							è®¢é˜…
						</a>
					
		          
		      
		          
		            
						<a href="/about" class="pure-menu-link">
							å…³äº
						</a>
					
		          
		      
		    </div>
		  </div>
	</li>
	
	
	  
      
  </ul>
   
</nav>
  </div>

  <div class="container" id="content-outer">
    <div class="inner" id="content-inner">
      <div class="post-container">
  <article class="post" id="post">
    <header class="post-header text-center">
      <h1 class="title">
        modelç®€ä»‹
      </h1>
      <span>
        
        <time class="time" datetime="2020-01-18T14:50:36.000Z">
        2020-01-18
      </time>
        
      </span>
      <span class="slash">/</span>
      <span class="post-meta">
      <span class="post-tags">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ember-Model/" rel="tag">Ember-Model</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ember-Teach/" rel="tag">Ember-Teach</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Emberjs/" rel="tag">Emberjs</a></li></ul>
      </span>
    </span>
      
      <span class="slash">/</span>
      <span class="read">é˜…è¯»è€—æ—¶é¢„è®¡ 5 åˆ†é’Ÿ</span>
    </header>

    <div class="post-content">
      <p><a target="_blank" rel="noopener" href="http://emberjs.com/">Ember</a>å®˜ç½‘ç”¨äº†å¤§ç¯‡å¹…æ¥ä»‹ç»<code>model</code>ï¼Œç›¸æ¯”ä¹‹å‰çš„<code>controller</code>ç®€ç›´å°±æ˜¯å¤©å£¤ä¹‹åˆ«å•Šï¼</p>
<p>ä»æœ¬ç¯‡å¼€å§‹å­¦ä¹ <a target="_blank" rel="noopener" href="http://emberjs.com/">Ember</a>çš„æ¨¡å‹ï¼Œè¿™ä¸€ç« ä¹Ÿæ˜¯<a target="_blank" rel="noopener" href="http://emberjs.com/">Ember</a>åŸºç¡€éƒ¨åˆ†çš„æœ€åä¸€ç« å†…å®¹ï¼Œéå¸¸çš„é‡è¦ï¼ˆä¸ç®¡ä½ ä¿¡ä¸ä¿¡åæ­£æˆ‘æ˜¯ä¿¡äº†ï¼‰ã€‚</p>
<p>åœ¨å¼€å§‹å­¦ä¹ <code>model</code>ä¹‹å‰å…ˆåšå¥½å‡†å¤‡å·¥ä½œï¼š<br>é‡æ–°åˆ›å»ºä¸€ä¸ª<a target="_blank" rel="noopener" href="http://emberjs.com/">Ember</a>é¡¹ç›®ï¼Œä»æ—§ä½¿ç”¨çš„æ˜¯<a target="_blank" rel="noopener" href="http://ember-cli.com/user-guide">Ember CLI</a>å‘½ä»¤åˆ›å»ºã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ember new chapter6_models</span><br><span class="line">cd chapter6_models</span><br><span class="line">ember server</span><br></pre></td></tr></table></figure>
<p>åœ¨æµè§ˆå™¨æ‰§è¡Œé¡¹ç›®ï¼Œçœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯è¯´æ˜é¡¹ç›®æ­å»ºæˆåŠŸã€‚<br><strong>Welcome to Ember</strong></p>
<p>æœ¬ç« æ¼”ç¤ºæ‰€ç”¨åˆ°çš„ä»£ç éƒ½å¯ä»¥ä»<a target="_blank" rel="noopener" href="https://github.com/ubuntuvim/my_emberjs_code/tree/master/chapter6_models">https://github.com/ubuntuvim/my_emberjs_code/tree/master/chapter6_models</a>è·å–ã€‚</p>
<p>åœ¨ä»‹ç»<code>model</code>ä¹‹å‰å…ˆåœ¨é¡¹ç›®ä¸­å¼•å…¥<a target="_blank" rel="noopener" href="https://www.firebase.com/">firebase</a>ã€‚ç›¸å…³çš„é…ç½®æ•™æè¯·ç§»æ­¥è¿™é‡Œï¼ˆå¦‚æœæ— æ³•åŠ è½½é¡µé¢è¯·å…ˆåœ¨<a target="_blank" rel="noopener" href="https://www.firebase.com/">https://www.firebase.com/</a>æ³¨å†Œç”¨æˆ·ï¼‰ã€‚firebaseçš„å®˜ç½‘æä¾›äº†ä¸“é—¨ç”¨äºEmberçš„ç‰ˆæœ¬ï¼Œè¿˜æä¾›äº†éå¸¸ç®€å•çš„ä¾‹å­ã€‚ä»å®‰è£…åˆ°æ•´åˆéƒ½ç»™å‡ºäº†éå¸¸è¯¦ç»†ä»£ç æ•™ç¨‹ã€‚<br>ä¸‹é¢æ˜¯æˆ‘çš„æ•´åˆæ­¥éª¤ï¼ˆå‘½ä»¤éƒ½æ˜¯åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œçš„ï¼‰ï¼š</p>
<ul>
<li><p>å®‰è£…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ember install emberfire</span><br></pre></td></tr></table></figure>
<p>å®‰è£…å®Œæˆä¹‹åä¼šè‡ªåŠ¨åˆ›å»º<code>adapterï¼ˆapp/adapters/application.jsï¼‰</code>ï¼Œå¯¹äºè¿™ä¸ªæ–‡ä»¶ä¸éœ€è¦åšä»»ä½•ä¿®æ”¹ï¼Œå®˜ç½‘æä¾›çš„ä»£ç ä¹Ÿè®¸è·Ÿä½ çš„é¡¹ç›®çš„ä»£ç ä¸åŒï¼Œåº”è¯¥æ˜¯å®˜ç½‘çš„ç‰ˆæœ¬æ˜¯æ—§ç‰ˆçš„ã€‚</p>
</li>
<li><p>é…ç½®<code>config/environment.js</code><br>ä¿®æ”¹ç¬¬å…«è¡Œ<code>firebase: &#39;https://YOUR-FIREBASE-NAME.firebaseio.com/&#39;</code>ã€‚è¿™ä¸ªåœ°å€æ˜¯ä½ æ³¨å†Œç”¨æˆ·æ—¶å€™å¾—åˆ°çš„ã€‚ä½ å¯ä»¥ä»<a target="_blank" rel="noopener" href="https://www.firebase.com/account/#/">è¿™é‡Œ</a>æŸ¥çœ‹ä½ çš„åœ°å€ã€‚æ¯”å¦‚ä¸‹å›¾æ‰€ç¤ºä½ç½®</p>
</li>
</ul>
<p><img src="http://static.oschina.net/uploads/img/201510/17021237_VucE.png" alt="æˆªå›¾"></p>
<ul>
<li>å†åœ¨<code>config/enviroment.js</code>çš„<code>APP:&#123;&#125;</code>(å¤§æ¦‚ç¬¬20è¡Œ)åé¢æ–°å¢å¦‚ä¸‹ä»£ç <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">APP: &#123;</span><br><span class="line">      <span class="comment">// Here you can pass flags/options to your application instance</span></span><br><span class="line">      <span class="comment">// when it is created</span></span><br><span class="line">    &#125;,</span><br><span class="line">    contentSecurityPolicy: &#123;</span><br><span class="line">      <span class="string">&#x27;default-src&#x27;</span>: <span class="string">&quot;&#x27;none&#x27;&quot;</span>,</span><br><span class="line">      <span class="string">&#x27;script-src&#x27;</span>: <span class="string">&quot;&#x27;self&#x27; &#x27;unsafe-inline&#x27; &#x27;unsafe-eval&#x27; *&quot;</span>,</span><br><span class="line">      <span class="string">&#x27;font-src&#x27;</span>: <span class="string">&quot;&#x27;self&#x27; *&quot;</span>,</span><br><span class="line">      <span class="string">&#x27;connect-src&#x27;</span>: <span class="string">&quot;&#x27;self&#x27; *&quot;</span>,</span><br><span class="line">      <span class="string">&#x27;img-src&#x27;</span>: <span class="string">&quot;&#x27;self&#x27; *&quot;</span>,</span><br><span class="line">      <span class="string">&#x27;style-src&#x27;</span>: <span class="string">&quot;&#x27;self&#x27; &#x27;unsafe-inline&#x27; *&quot;</span>,</span><br><span class="line">      <span class="string">&#x27;frame-src&#x27;</span>: <span class="string">&quot;*&quot;</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
ç„¶åå†æ³¨é‡Šæ‰ç¬¬7è¡ŒåŸæœ‰å±æ€§ï¼ˆå®‰è£…<code>firebase</code>è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œä½†æ˜¯é…ç½®ä¸å¤Ÿå®Œæ•´ï¼‰ï¼š<code>contentSecurityPolicy</code>ã€‚</li>
</ul>
<p>æˆ–è€…ä½ å¯ä»¥å‚è€ƒæˆ‘çš„é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* jshint node: true */</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">environment</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> ENV = &#123;</span><br><span class="line">    modulePrefix: <span class="string">&#x27;chapter6-models&#x27;</span>,</span><br><span class="line">    environment: environment,</span><br><span class="line">    <span class="comment">// contentSecurityPolicy: &#123; &#x27;connect-src&#x27;: &quot;&#x27;self&#x27; https://auth.firebase.com wss://*.firebaseio.com&quot; &#125;,</span></span><br><span class="line">    firebase: <span class="string">&#x27;ä½ çš„firebaseè¿æ¥&#x27;</span>,</span><br><span class="line">    baseURL: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    locationType: <span class="string">&#x27;auto&#x27;</span>,</span><br><span class="line">    EmberENV: &#123;</span><br><span class="line">      FEATURES: &#123;</span><br><span class="line">        <span class="comment">// Here you can enable experimental features on an ember canary build</span></span><br><span class="line">        <span class="comment">// e.g. &#x27;with-controller&#x27;: true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    APP: &#123;</span><br><span class="line">      <span class="comment">// Here you can pass flags/options to your application instance</span></span><br><span class="line">      <span class="comment">// when it is created</span></span><br><span class="line">    &#125;,</span><br><span class="line">    contentSecurityPolicy: &#123;</span><br><span class="line">      <span class="string">&#x27;default-src&#x27;</span>: <span class="string">&quot;&#x27;none&#x27;&quot;</span>,</span><br><span class="line">      <span class="string">&#x27;script-src&#x27;</span>: <span class="string">&quot;&#x27;self&#x27; &#x27;unsafe-inline&#x27; &#x27;unsafe-eval&#x27; *&quot;</span>,</span><br><span class="line">      <span class="string">&#x27;font-src&#x27;</span>: <span class="string">&quot;&#x27;self&#x27; *&quot;</span>,</span><br><span class="line">      <span class="string">&#x27;connect-src&#x27;</span>: <span class="string">&quot;&#x27;self&#x27; *&quot;</span>,</span><br><span class="line">      <span class="string">&#x27;img-src&#x27;</span>: <span class="string">&quot;&#x27;self&#x27; *&quot;</span>,</span><br><span class="line">      <span class="string">&#x27;style-src&#x27;</span>: <span class="string">&quot;&#x27;self&#x27; &#x27;unsafe-inline&#x27; *&quot;</span>,</span><br><span class="line">      <span class="string">&#x27;frame-src&#x27;</span>: <span class="string">&quot;*&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…¶ä»–ä»£ç çœç•¥â‹¯â‹¯</span></span><br><span class="line">  <span class="keyword">return</span> ENV;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸åšè¿™ä¸ªé…ç½®å¯åŠ¨é¡¹ç›®ä¹‹åæµè§ˆå™¨ä¼šæç¤ºä¸€å †çš„é”™è¯¯ã€‚ä¸»è¦æ˜¯ä¸€äº›è®¿é—®æƒé™é—®é¢˜ã€‚é…ç½®å®Œä¹‹åéœ€è¦é‡å¯é¡¹ç›®æ‰èƒ½ç”Ÿæ•ˆï¼</p>
<h2 id="1ï¼Œç®€ä»‹"><a href="#1ï¼Œç®€ä»‹" class="headerlink" title="1ï¼Œç®€ä»‹"></a>1ï¼Œç®€ä»‹</h2><p><code>model</code>æ˜¯ä¸€ä¸ªç”¨äºå‘ç”¨æˆ·å‘ˆç°åº•å±‚æ•°æ®çš„å¯¹è±¡ã€‚ä¸åŒçš„åº”ç”¨æœ‰ä¸åŒçš„<code>model</code>ï¼Œè¿™å–å†³äºè§£å†³çš„é—®é¢˜éœ€è¦ä»€ä¹ˆæ ·çš„<code>model</code>å°±å®šä¹‰ä»€ä¹ˆæ ·çš„<code>model</code>ã€‚<br><BR><br><code>model</code>é€šå¸¸æ˜¯æŒä¹…åŒ–çš„ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ç”¨æˆ·å…³é—­äº†æµè§ˆå™¨çª—å£<code>model</code>æ•°æ®ä¸åº”è¯¥ä¸¢å¤±ã€‚ä¸ºäº†ç¡®ä¿<code>model</code>æ•°æ®ä¸ä¸¢å¤±ï¼Œä½ éœ€è¦å­˜å‚¨<code>model</code>æ•°æ®åˆ°ä½ æ‰€æŒ‡å®šçš„æœåŠ¡å™¨æˆ–è€…æ˜¯æœ¬åœ°æ•°æ®æ–‡ä»¶ä¸­ã€‚<br><BR><br>ä¸€ç§éå¸¸å¸¸è§çš„æƒ…å†µæ˜¯ï¼Œ<code>model</code>æ•°æ®ä¼šä»¥<code>JSON</code>çš„æ ¼å¼é€šè¿‡<code>HTTP</code>å‘é€åˆ°æœåŠ¡å™¨å¹¶ä¿å­˜åœ¨æœåŠ¡ä¸­ã€‚Emberè¿˜æœªå¼€å‘è€…æä¾›äº†ä¸€ç§æ›´åŠ ç®€ä¾¿çš„æ–¹å¼ï¼šä½¿ç”¨<a href="w3c.github.io/IndexedDB/">IndexedDB</a>ï¼ˆä½¿ç”¨åœ¨æµè§ˆå™¨ä¸­çš„æ•°æ®åº“ï¼‰ã€‚è¿™ç§æ–¹å¼æ˜¯æŠŠ<code>model</code>æ•°æ®ä¿å­˜åˆ°æœ¬åœ°ã€‚æˆ–è€…ä½¿ç”¨<a target="_blank" rel="noopener" href="https://github.com/emberjs/data">Ember Data</a>ï¼Œåˆæˆ–è€…ä½¿ç”¨<a target="_blank" rel="noopener" href="https://www.firebase.com/">firebase</a>ï¼ŒæŠŠæ•°æ®ç›´æ¥ä¿å­˜åˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼Œåç»­çš„æ–‡ç« æˆ‘å°†å¼•å…¥<a target="_blank" rel="noopener" href="https://www.firebase.com/">firebase</a>ï¼ŒæŠŠæ•°æ®ä¿å­˜åˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Šã€‚<br><BR><br>Emberä½¿ç”¨é€‚é…å™¨æ¨¡å¼è¿æ¥æ•°æ®åº“ï¼Œå¯ä»¥é€‚é…ä¸åŒç±»å‹çš„åç«¯æ•°æ®åº“è€Œä¸éœ€è¦ä¿®æ”¹ä»»ä½•çš„ç½‘ç»œä»£ç ã€‚ä½ å¯ä»¥ä»<a target="_blank" rel="noopener" href="http://emberobserver.com/categories/ember-data-adapters">emberobserver</a>ä¸Šçœ‹åˆ°å‡ ä¹æ‰€æœ‰Emberæ”¯æŒçš„æ•°æ®åº“ã€‚<br><BR><br>å¦‚æœä½ æƒ³æŠŠä½ çš„Emberåº”ç”¨ä¸ä½ çš„è¿œç¨‹æœåŠ¡å™¨æ•´åˆï¼Œå‡ éè¿œç¨‹æœåŠ¡å™¨<code>API</code>è¿”å›çš„æ•°æ®ä¸æ˜¯è§„èŒƒçš„<code>JSON</code>æ•°æ®ä¹Ÿä¸è¦ç´§ï¼Œ<a target="_blank" rel="noopener" href="https://github.com/emberjs/data">Ember Data</a>å¯ä»¥é…ç½®ä»»ä½•æœåŠ¡å™¨è¿”å›çš„æ•°æ®ã€‚<br><BR><br><a target="_blank" rel="noopener" href="https://github.com/emberjs/data">Ember Data</a>è¿˜æ”¯æŒæµåª’ä½“æœåŠ¡å™¨ï¼Œæ¯”å¦‚WebSocketã€‚ä½ å¯ä»¥æ‰“å¼€ä¸€ä¸ªsocketè¿æ¥è¿œç¨‹æœåŠ¡å™¨ï¼Œè·å–æœ€æ–°çš„æ•°æ®æˆ–è€…æŠŠå˜åŒ–çš„æ•°æ®æ¨é€åˆ°è¿œç¨‹æœåŠ¡å™¨ä¿å­˜ã€‚<br><BR><br><a target="_blank" rel="noopener" href="https://github.com/emberjs/data">Ember Data</a>ä¸ºä½ æä¾›äº†æ›´åŠ ç®€ä¾¿çš„æ–¹å¼æ“ä½œæ•°æ®ï¼Œç»Ÿä¸€ç®¡ç†æ•°æ®çš„åŠ è½½ï¼Œé™ä½ç¨‹åºå¤æ‚åº¦ã€‚<br><BR><br>å¯¹äº<code>model</code>ä¸<a target="_blank" rel="noopener" href="https://github.com/emberjs/data">Ember Data</a>çš„ä»‹ç»å°±åˆ°æ­¤ä¸ºæ­¢å§ï¼Œå®˜ç½‘ç”¨äº†å¤§é‡ç¯‡å¹…ä»‹ç»Modelï¼Œåœ¨æ­¤æˆ‘å°±ä¸ä¸€ä¸€å†™å‡ºæ¥äº†ï¼å¤ªé•¿äº†ï¼Œå†™å‡ºæ¥ä¹Ÿæ²¡äººçœ‹çš„ï¼ï¼ï¼å¦‚æœæœ‰å…´è¶£è‡ªå·±çœ‹å§ï¼<a href="guides.emberjs.com/v2.0.0/models/#toc_the-store-and-a-single-source-of-truth">ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</a>ã€‚<br><BR><br>ä¸‹é¢å…ˆçœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œç”±è¿™ä¸ªä¾‹å­å»¶ä¼¸å‡ºæœ‰å…³äº<code>model</code>çš„æ ¸å¿ƒæ¦‚å¿µã€‚è¿™äº›ä»£ç æ˜¯æ—§ç‰ˆå†™æ³•ï¼Œä»…ä»…æ˜¯ä¸ºäº†è¯´æ˜é—®é¢˜ï¼Œæœ¬æ–‡ä¹Ÿä¸ä¼šçœŸæ­£æ‰§è¡Œã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  app/components/list-of-drafts.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Component.extend(&#123;</span><br><span class="line">  willRender() &#123;</span><br><span class="line">    <span class="comment">// ECMAScript 6è¯­æ³•</span></span><br><span class="line">    $.getJSON(<span class="string">&#x27;/drafts&#x27;</span>).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.set(<span class="string">&#x27;drafts&#x27;</span>, data);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>å®šä¹‰äº†ä¸€ä¸ªç»„ä»¶ç±»ã€‚å¹¶åœ¨ç»„ä»¶ç±»ä¸­è·å–<code>json</code>æ ¼å¼æ•°æ®ã€‚<br>ä¸‹é¢æ˜¯ç»„ä»¶å¯¹åº”çš„æ¨¡æ¿æ–‡ä»¶ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- app/templates/components/list-of-drafts.hbs  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  &#123;&#123;#each drafts key=&quot;id&quot; as |draft|&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;draft.title&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  &#123;&#123;/each&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å†å®šä¹‰å¦å¤–ä¸€ä¸ªç»„ä»¶ç±»å’Œæ¨¡æ¿</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  app/components/list-button.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Component.extend(&#123;</span><br><span class="line">  willRender() &#123;</span><br><span class="line">    <span class="comment">// ECMAScript 6è¯­æ³•</span></span><br><span class="line">    $.getJSON(<span class="string">&#x27;/drafts&#x27;</span>).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.set(<span class="string">&#x27;drafts&#x27;</span>, data);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- app/templates/components/ list-button.hbs  --&gt;</span></span><br><span class="line">&#123;&#123;#link-to â€˜draftsâ€™ tagName=â€™buttonâ€™&#125;&#125;</span><br><span class="line">Drafts (&#123;&#123;drafts.length&#125;&#125;)</span><br><span class="line">&#123;&#123;/link-to&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>ç»„ä»¶<code>list-of-drafts</code>ç±»å’Œç»„ä»¶<code>list-button</code>ç±»æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä»–ä»¬çš„å¯¹åº”çš„æ¨¡æ¿å´ä¸ä¸€æ ·ã€‚ä½†æ˜¯éƒ½æ˜¯ä»è¿œç¨‹æœåŠ¡å™¨è·å–åŒæ ·çš„æ•°æ®ã€‚å¦‚æœæ²¡æœ‰<code>Store</code>ï¼ˆ<code>model</code>æ ¸å¿ƒå†…å®¹ä¹‹ä¸€ï¼‰é‚£ä¹ˆæ¯æ¬¡è¿™ä¸¤ä¸ªæ¨¡æ¿æ¸²æŸ“éƒ½ä¼šæ˜¯ç»„ä»¶ç±»è°ƒç”¨ä¸€æ¬¡è¿œç¨‹æ•°æ®ã€‚å¹¶ä¸”è¿”å›çš„æ•°æ®æ˜¯ä¸€æ ·çš„ã€‚è¿™æ— å½¢ä¸­å¢åŠ äº†ä¸å¿…è¦çš„è¯·æ±‚ï¼Œæš‚ç”¨äº†ä¸å¿…è¦çš„å®½å¸¦ï¼Œç”¨æˆ·ä½“éªŒä¹Ÿä¸å¥½ã€‚ä½†æ˜¯æœ‰äº†<code>Store</code>å°±ä¸ä¸€æ ·äº†ï¼Œä½ å¯ä»¥æŠŠ<code>Store</code>ç†è§£ä¸ºä»“åº“ï¼Œæ¯æ¬¡æ‰§è¡Œç»„ä»¶ç±»æ—¶å…ˆåˆ°<code>Store</code>ä¸­è·å–æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰å†å»è¿œç¨‹è·å–ã€‚å½“åœ¨å…¶ä¸­ä¸€ä¸ªç»„ä»¶ä¸­æ”¹å˜æŸäº›æ•°æ®ï¼Œæ•°æ®çš„æ›´æ”¹ä¹Ÿèƒ½ç†è§£ååº”åˆ°å¦ä¸€ä¸ªè·å–æ­¤æ•°æ®çš„ç»„ä»¶ä¸Šï¼ˆä¸è®¡ç®—å±æ€§è‡ªåŠ¨æ›´æ–°ä¸€æ ·ï¼‰ï¼Œè€Œè¿™ä¸ªç»„ä»¶ä¸éœ€è¦å†å»æœåŠ¡è¯·æ±‚æ‰èƒ½è·å–æœ€æ–°æ›´æ”¹è¿‡çš„æ•°æ®ã€‚</p>
<p>ä¸‹é¢çš„å†…å®¹å°†ä¸ºä½ ä¸€ä¸€ä»‹ç»Ember Dataæœ€æ ¸å¿ƒçš„å‡ ä¸ªä¸œè¥¿ï¼š<code>models</code>ã€<code>records</code>ã€<code>adapters</code>ã€<code>store</code>ã€‚</p>
<h2 id="2ï¼Œæ ¸å¿ƒæ¦‚å¿µ"><a href="#2ï¼Œæ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="2ï¼Œæ ¸å¿ƒæ¦‚å¿µ"></a>2ï¼Œæ ¸å¿ƒæ¦‚å¿µ</h2><p>å£°æ˜ï¼šä¸‹é¢ç®€ä»‹å†…æ‘˜æŠ„è‡³<a target="_blank" rel="noopener" href="http://www.emberjs.cn/guides/models/#toc_">http://www.emberjs.cn/guides/models/#toc_</a>ã€‚</p>
<h4 id="1ï¼Œstore"><a href="#1ï¼Œstore" class="headerlink" title="1ï¼Œstore"></a>1ï¼Œstore</h4><p><code>store</code>æ˜¯åº”ç”¨å­˜æ”¾è®°å½•çš„ä¸­å¿ƒä»“åº“ã€‚ä½ å¯ä»¥è®¤ä¸º<code>store</code>æ˜¯åº”ç”¨çš„æ‰€æœ‰æ•°æ®çš„ç¼“å­˜ã€‚åº”ç”¨çš„æ§åˆ¶å™¨å’Œè·¯ç”±éƒ½å¯ä»¥è®¿é—®è¿™ä¸ªå…±äº«çš„<code>store</code>ï¼›å½“å®ƒä»¬éœ€è¦æ˜¾ç¤ºæˆ–è€…ä¿®æ”¹ä¸€ä¸ªè®°å½•æ—¶ï¼Œé¦–å…ˆå°±éœ€è¦è®¿é—®<code>store</code>ã€‚</p>
<p><code>DS.Store</code>çš„å®ä¾‹ä¼šè¢«è‡ªåŠ¨åˆ›å»ºï¼Œå¹¶ä¸”è¯¥å®ä¾‹è¢«åº”ç”¨ä¸­æ‰€æœ‰çš„å¯¹è±¡æ‰€å…±äº«ã€‚</p>
<p><code>store</code>å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªç¼“å­˜ã€‚åœ¨ä¸‹é¢çš„<code>cache</code>ä¼šç»“åˆ<code>store</code>ä»‹ç»ã€‚</p>
<p>ä¸‹é¢çš„ä¾‹å­ç»“åˆfirebaseæ¼”ç¤ºï¼š<br>åˆ›å»ºè·¯ç”±å’Œ<code>model</code>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ember g route store-example</span><br><span class="line">ember g model article</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//   app/models/article.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> DS <span class="keyword">from</span> <span class="string">&#x27;ember-data&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> DS.Model.extend(&#123;</span><br><span class="line">  title: DS.attr(<span class="string">&#x27;string&#x27;</span>),</span><br><span class="line">  body: DS.attr(<span class="string">&#x27;string&#x27;</span>),</span><br><span class="line">  timestamp: DS.attr(<span class="string">&#x27;number&#x27;</span>),</span><br><span class="line">  category: DS.attr(<span class="string">&#x27;string&#x27;</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå°±æ˜¯<code>model</code>ï¼Œæœ¬ç« è¦è®²çš„å†…å®¹å°±æ˜¯å®ƒï¼ä¸ºä½•æ²¡æœ‰å®šä¹‰idå±æ€§å‘¢ï¼Ÿ<code>Ember</code>ä¼šé»˜è®¤ç”Ÿæˆ<code>id</code>å±æ€§ã€‚</p>
<p>æˆ‘ä»¬åœ¨è·¯ç”±çš„<code>model</code>å›è°ƒä¸­è·å–è¿œç¨‹çš„æ•°æ®ï¼Œå¹¶æ˜¾ç¤ºåœ¨æ¨¡æ¿ä¸Šã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  app/routes/store-example.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Ember <span class="keyword">from</span> <span class="string">&#x27;ember&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Ember.Route.extend(&#123;</span><br><span class="line">  model: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä»storeä¸­è·å–idä¸ºJzySrmbivaSSFG6WwOkçš„æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®æ˜¯æˆ‘åœ¨æˆ‘çš„firebaseä¸­åˆå§‹åŒ–å¥½çš„</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.store.find(<span class="string">&#x27;article&#x27;</span>, <span class="string">&#x27;-JzySrmbivaSSFG6WwOk&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><code>find</code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<code>model</code>ç±»åï¼Œç¬¬äºŒä¸ªå‚æ•°å¯¹è±¡çš„<code>id</code>å±æ€§å€¼ã€‚è®°å¾—idå±æ€§ä¸éœ€è¦åœ¨<code>model</code>ç±»ä¸­æ‰‹åŠ¨å®šä¹‰ï¼ŒEmberä¼šè‡ªåŠ¨ä¸ºä½ å®šä¹‰ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;model.title&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;body&quot;</span>&gt;</span></span><br><span class="line">&#123;&#123;model.body&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é¡µé¢åŠ è½½ä¹‹åå¯ä»¥çœ‹åˆ°è·å–åˆ°çš„æ•°æ®ã€‚</p>
<p><img src="http://static.oschina.net/uploads/img/201510/17022136_51O7.png" alt="åŠ è½½å¾—åˆ°çš„æ•°æ®"></p>
<p>ä¸‹é¢æ˜¯æˆ‘çš„firebaseä¸Šçš„éƒ¨åˆ†æ•°æ®æˆªå›¾ã€‚</p>
<p><img src="http://static.oschina.net/uploads/img/201510/17022136_7wt1.png" alt="firebaseæ•°æ®"></p>
<p>å¯ä»¥çœ‹åˆ°æˆåŠŸè·å–åˆ°<code>id</code>ä¸º<code>-JzySrmbivaSSFG6WwOk</code>çš„æ•°æ®ã€‚æ›´å¤šå…³äºæ•°æ®çš„æ“ä½œåœ¨åé¢ä¼šè¯¦ç»†ä»‹ç»ã€‚</p>
<h4 id="2ï¼Œmodel"><a href="#2ï¼Œmodel" class="headerlink" title="2ï¼Œmodel"></a>2ï¼Œmodel</h4><p>æœ‰å…³<code>model</code>çš„æ¦‚å¿µå‰é¢çš„ç®€ä»‹å·²ç»ä»‹ç»äº†ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚<br><code>model</code>å®šä¹‰ï¼š</p>
<p><code>model</code>æ˜¯ç”±è‹¥å¹²ä¸ªå±æ€§æ„æˆçš„ã€‚<code>attr</code>æ–¹æ³•çš„å‚æ•°æŒ‡å®šå±æ€§çš„ç±»å‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> DS.Model.extend(&#123;</span><br><span class="line">  title: DS.attr(<span class="string">&#x27;string&#x27;</span>),  <span class="comment">//  å­—ç¬¦ä¸²ç±»å‹</span></span><br><span class="line">  flag: DS.attr(<span class="string">&#x27;boolean&#x27;</span>), <span class="comment">//  å¸ƒå°”ç±»å‹</span></span><br><span class="line">  timestamp: DS.attr(<span class="string">&#x27;number&#x27;</span>),  <span class="comment">//  æ•°å­—ç±»å‹</span></span><br><span class="line">  birth: DS.attr(â€˜dateâ€™)  <span class="comment">//æ—¥æœŸç±»å‹</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>æ¨¡å‹ä¹Ÿå£°æ˜äº†å®ƒä¸å…¶ä»–å¯¹è±¡çš„å…³ç³»ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª<code>Order</code>å¯ä»¥æœ‰è®¸å¤š<code>LineItems</code>ï¼Œä¸€ä¸ª<code>LineItem</code>å¯ä»¥å±äºä¸€ä¸ªç‰¹å®šçš„<code>Order</code>ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">App.Order = DS.Model.extend(&#123;</span><br><span class="line">  lineItems: DS.hasMany(<span class="string">&#x27;lineItem&#x27;</span>)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">App.LineItem = DS.Model.extend(&#123;</span><br><span class="line">  order: DS.belongsTo(<span class="string">&#x27;order&#x27;</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªä¸æ•°æ®çš„è¡¨ä¹‹é—´çš„å…³ç³»æ˜¯ä¸€æ ·çš„ã€‚</p>
<h4 id="3ï¼Œrecord"><a href="#3ï¼Œrecord" class="headerlink" title="3ï¼Œrecord"></a>3ï¼Œrecord</h4><p><code>record</code>æ˜¯<code>model</code>çš„å®ä¾‹ï¼ŒåŒ…å«äº†ä»æœåŠ¡å™¨ç«¯åŠ è½½è€Œæ¥çš„æ•°æ®ã€‚åº”ç”¨æœ¬èº«ä¹Ÿå¯ä»¥åˆ›å»ºæ–°çš„è®°å½•ï¼Œä»¥åŠå°†æ–°è®°å½•ä¿å­˜åˆ°æœåŠ¡å™¨ç«¯ã€‚</p>
<p>è®°å½•ç”±ä»¥ä¸‹ä¸¤ä¸ªå±æ€§æ¥å”¯ä¸€æ ‡è¯†ï¼š</p>
<ol>
<li>æ¨¡å‹ç±»å‹</li>
<li>ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ID</li>
</ol>
<p>æ¯”å¦‚å‰é¢çš„å®ä¾‹<code>article</code>å°±æ˜¯é€šè¿‡<code>find</code>æ–¹è·å–ã€‚è·å–åˆ°çš„ç»“æœå°±æ˜¯ä¸€ä¸ª<code>record</code>ã€‚</p>
<h4 id="4ï¼Œadapter"><a href="#4ï¼Œadapter" class="headerlink" title="4ï¼Œadapter"></a>4ï¼Œadapter</h4><p>é€‚é…å™¨æ˜¯ä¸€ä¸ªäº†è§£ç‰¹å®šçš„æœåŠ¡å™¨åç«¯çš„å¯¹è±¡ï¼Œä¸»è¦è´Ÿè´£å°†å¯¹è®°å½•(<code>record</code>)çš„è¯·æ±‚å’Œå˜æ›´è½¬æ¢ä¸ºæ­£ç¡®çš„å‘æœåŠ¡å™¨ç«¯çš„è¯·æ±‚è°ƒç”¨ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¦‚æœåº”ç”¨éœ€è¦ä¸€ä¸ª<code>ID</code>ä¸º<code>1</code>çš„<code>person</code>è®°å½•ï¼Œé‚£ä¹ˆEmber Dataæ˜¯å¦‚ä½•åŠ è½½è¿™ä¸ªå¯¹è±¡çš„å‘¢ï¼Ÿæ˜¯é€šè¿‡HTTPï¼Œè¿˜æ˜¯Websocketï¼Ÿå¦‚æœæ˜¯é€šè¿‡HTTPï¼Œé‚£ä¹ˆURLä¼šæ˜¯<code>/person/1</code>ï¼Œè¿˜æ˜¯<code>/resources/people/1</code>å‘¢ï¼Ÿ</p>
<p>é€‚é…å™¨è´Ÿè´£å¤„ç†æ‰€æœ‰ç±»ä¼¼çš„é—®é¢˜ã€‚æ— è®ºä½•æ—¶ï¼Œå½“åº”ç”¨éœ€è¦ä»<code>store</code>ä¸­è·å–ä¸€ä¸ªæ²¡æœ‰è¢«ç¼“å­˜çš„è®°å½•æ—¶ï¼Œåº”ç”¨å°±ä¼šè®¿é—®é€‚é…å™¨æ¥è·å–è¿™ä¸ªè®°å½•ã€‚å¦‚æœæ”¹å˜äº†ä¸€ä¸ªè®°å½•å¹¶å‡†å¤‡ä¿å­˜æ”¹å˜æ—¶ï¼Œ<code>store</code>ä¼šå°†è®°å½•ä¼ é€’ç»™é€‚é…å™¨ï¼Œç„¶åç”±é€‚é…å™¨è´Ÿè´£å°†æ•°æ®å‘é€ç»™æœåŠ¡å™¨ç«¯ï¼Œå¹¶ç¡®è®¤ä¿å­˜æ˜¯å¦æˆåŠŸã€‚</p>
<h4 id="5ï¼Œcache"><a href="#5ï¼Œcache" class="headerlink" title="5ï¼Œcache"></a>5ï¼Œcache</h4><p><code>store</code>ä¼šè‡ªåŠ¨ç¼“å­˜è®°å½•ã€‚å¦‚æœä¸€ä¸ªè®°å½•å·²ç»è¢«åŠ è½½äº†ï¼Œé‚£ä¹ˆå†æ¬¡è®¿é—®å®ƒçš„æ—¶å€™ï¼Œä¼šè¿”å›åŒä¸€ä¸ªå¯¹è±¡å®ä¾‹ã€‚è¿™æ ·å¤§å¤§å‡å°‘äº†ä¸æœåŠ¡å™¨ç«¯çš„å¾€è¿”é€šä¿¡ï¼Œä½¿å¾—åº”ç”¨å¯ä»¥æ›´å¿«çš„ä¸ºç”¨æˆ·æ¸²æŸ“æ‰€éœ€çš„UIã€‚</p>
<p>ä¾‹å¦‚ï¼Œåº”ç”¨ç¬¬ä¸€æ¬¡ä»<code>store</code>ä¸­è·å–ä¸€ä¸ª<code>ID</code>ä¸º<code>1</code>çš„<code>person</code>è®°å½•æ—¶ï¼Œå°†ä¼šä»æœåŠ¡å™¨ç«¯è·å–å¯¹è±¡çš„æ•°æ®ã€‚</p>
<p>ä½†æ˜¯ï¼Œå½“åº”ç”¨å†æ¬¡éœ€è¦<code>ID</code>ä¸º<code>1</code>çš„<code>person</code>è®°å½•æ—¶ï¼Œ<code>store</code>ä¼šå‘ç°è¿™ä¸ªè®°å½•å·²ç»è·å–åˆ°äº†ï¼Œå¹¶ä¸”ç¼“å­˜äº†è¯¥è®°å½•ã€‚é‚£ä¹ˆ<code>store</code>å°±ä¸ä¼šå†å‘æœåŠ¡å™¨ç«¯å‘é€è¯·æ±‚å»è·å–è®°å½•çš„æ•°æ®ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›ç¬¬ä¸€æ¬¡æ—¶å€™è·å–åˆ°å¹¶æ„é€ å‡ºæ¥çš„è®°å½•ã€‚è¿™ä¸ªç‰¹æ€§ä½¿å¾—ä¸è®ºè¯·æ±‚è¿™ä¸ªè®°å½•å¤šå°‘æ¬¡ï¼Œéƒ½ä¼šè¿”å›åŒä¸€ä¸ªè®°å½•å¯¹è±¡ï¼Œè¿™ä¹Ÿè¢«ç§°ä¸º<code>Identity Map</code>ï¼ˆæ ‡è¯†ç¬¦æ˜ å°„ï¼‰ã€‚</p>
<p>ä½¿ç”¨æ ‡è¯†ç¬¦æ˜ å°„éå¸¸é‡è¦ï¼Œå› ä¸ºè¿™æ ·ç¡®ä¿äº†åœ¨ä¸€ä¸ªUIä¸Šå¯¹ä¸€ä¸ªè®°å½•çš„ä¿®æ”¹ä¼šè‡ªåŠ¨ä¼ æ’­åˆ°UIå…¶ä»–ä½¿ç”¨åˆ°è¯¥è®°å½•çš„UIã€‚åŒæ—¶è¿™æ„å‘³ç€ä½ æ— é¡»æ‰‹åŠ¨å»ä¿æŒå¯¹è±¡çš„åŒæ­¥ï¼Œåªéœ€è¦ä½¿ç”¨<code>ID</code>æ¥è·å–åº”ç”¨å·²ç»è·å–åˆ°çš„è®°å½•å°±å¯ä»¥äº†ã€‚</p>
<h2 id="3ï¼Œæ¶æ„ç®€ä»‹"><a href="#3ï¼Œæ¶æ„ç®€ä»‹" class="headerlink" title="3ï¼Œæ¶æ„ç®€ä»‹"></a>3ï¼Œæ¶æ„ç®€ä»‹</h2><p>åº”ç”¨ç¬¬ä¸€æ¬¡ä»<code>store</code>è·å–ä¸€ä¸ªè®°å½•æ—¶ï¼Œ<code>store</code>ä¼šå‘ç°æœ¬åœ°ç¼“å­˜å¹¶ä¸å­˜åœ¨ä¸€ä»½è¢«è¯·æ±‚çš„è®°å½•çš„å‰¯æœ¬ï¼Œè¿™æ—¶ä¼šå‘é€‚é…å™¨å‘è¯·æ±‚ã€‚é€‚é…å™¨å°†ä»æŒä¹…å±‚å»è·å–è®°å½•ï¼›é€šå¸¸æƒ…å†µä¸‹ï¼ŒæŒä¹…å±‚éƒ½æ˜¯ä¸€ä¸ªHTTPæœåŠ¡ï¼Œé€šè¿‡è¯¥æœåŠ¡å¯ä»¥è·å–åˆ°è®°å½•çš„ä¸€ä¸ª<code>JSON</code>è¡¨ç¤ºã€‚</p>
<p><img src="http://static.oschina.net/uploads/img/201510/17022136_qwjL.png" alt="æ¶æ„å›¾1"></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œé€‚é…å™¨æœ‰æ—¶ä¸èƒ½ç«‹å³è¿”å›è¯·æ±‚çš„è®°å½•ã€‚è¿™æ—¶é€‚é…å™¨å¿…é¡»å‘æœåŠ¡å™¨å‘èµ·ä¸€ä¸ªå¼‚æ­¥çš„è¯·æ±‚ï¼Œå½“è¯·æ±‚å®ŒæˆåŠ è½½åï¼Œæ‰èƒ½é€šè¿‡è¿”å›çš„æ•°æ®åˆ›å»ºçš„è®°å½•ã€‚</p>
<p>ç”±äºå­˜åœ¨è¿™æ ·çš„å¼‚æ­¥æ€§ï¼Œ<code>store</code>ä¼šä»<code>find()</code>æ–¹æ³•ç«‹å³è¿”å›ä¸€ä¸ªæ‰¿è¯ºï¼ˆ<code>promise</code>ï¼‰ã€‚å¦å¤–ï¼Œæ‰€æœ‰è¯·æ±‚éœ€è¦<code>store</code>ä¸é€‚é…å™¨å‘ç”Ÿäº¤äº’çš„è¯ï¼Œéƒ½ä¼šè¿”å›æ‰¿è¯ºã€‚<br>ä¸€æ—¦å‘ç»™æœåŠ¡å™¨ç«¯çš„è¯·æ±‚è¿”å›è¢«è¯·æ±‚è®°å½•çš„JSONæ•°æ®æ—¶ï¼Œé€‚é…å™¨ä¼šå±¥è¡Œæ‰¿è¯ºï¼Œå¹¶å°†<code>JSON</code>ä¼ é€’ç»™<code>store</code>ã€‚<br><code>store</code>è¿™æ—¶å°±è·å–åˆ°äº†<code>JSON</code>ï¼Œå¹¶ä½¿ç”¨<code>JSON</code>æ•°æ®å®Œæˆè®°å½•çš„åˆå§‹åŒ–ï¼Œå¹¶ä½¿ç”¨æ–°åŠ è½½çš„è®°å½•æ¥å±¥è¡Œå·²ç»è¿”å›åˆ°åº”ç”¨çš„æ‰¿è¯ºã€‚</p>
<p><img src="http://static.oschina.net/uploads/img/201510/17022136_iwjw.png" alt="æ¶æ„å›¾2"></p>
<p>ä¸‹é¢å°†ä»‹ç»ä¸€ä¸‹å½“<code>store</code>å·²ç»ç¼“å­˜äº†è¯·æ±‚çš„è®°å½•æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p>
<p><img src="http://static.oschina.net/uploads/img/201510/17022136_Xy17.png" alt="æ¶æ„å›¾3"></p>
<p>åœ¨è¿™ç§æƒ…å½¢ä¸‹ï¼Œ<code>store</code>å·²ç»ç¼“å­˜äº†è¯·æ±‚çš„è®°å½•ï¼Œä¸è¿‡å®ƒä¹Ÿå°†è¿”å›ä¸€ä¸ªæ‰¿è¯ºï¼Œä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ªæ‰¿è¯ºå°†ä¼šç«‹å³ä½¿ç”¨ç¼“å­˜çš„è®°å½•æ¥å±¥è¡Œã€‚æ­¤æ—¶ï¼Œç”±äº<code>store</code>å·²ç»æœ‰äº†ä¸€ä»½æ‹·è´ï¼Œæ‰€ä»¥ä¸éœ€è¦å‘é€‚é…å™¨å»è¯·æ±‚ï¼ˆæ²¡æœ‰ä¸æœåŠ¡å™¨å‘ç”Ÿäº¤äº’ï¼‰ã€‚</p>
<p><code>models</code>ã€<code>records</code>ã€<code>adapters</code>ã€<code>store</code>æ˜¯ä½ å¿…é¡»è¦ç†è§£çš„æ¦‚å¿µã€‚è¿™æ˜¯Ember Dataæœ€æ ¸å¿ƒçš„ä¸œè¥¿ã€‚</p>
<p>æœ‰å…³äºä¸Šè¿°çš„æ¦‚å¿µå°†ä¼šåœ¨åé¢çš„æ–‡ç« ä¸€ä¸€ç”¨ä»£ç æ¼”ç¤ºã€‚ç†è§£äº†æœ¬æ–‡<code>model</code>è¿™ä¸€æ•´ç« çš„å†…å®¹éƒ½ä¸æ˜¯é—®é¢˜äº†ï¼ï¼ï¼<br><br><br>åšæ–‡å®Œæ•´ä»£ç æ”¾åœ¨<a target="_blank" rel="noopener" href="https://github.com/ubuntuvim/my_emberjs_code">Github</a>ï¼ˆåšæ–‡ç»è¿‡å¤šæ¬¡ä¿®æ”¹ï¼Œåšæ–‡ä¸Šçš„ä»£ç ä¸githubä»£ç å¯èƒ½æœ‰å‡ºå…¥ï¼Œä¸è¿‡å½±å“ä¸å¤§ï¼ï¼‰ï¼Œå¦‚æœä½ è§‰å¾—åšæ–‡å¯¹ä½ æœ‰ç‚¹ç”¨ï¼Œè¯·åœ¨githubé¡¹ç›®ä¸Šç»™æˆ‘ç‚¹ä¸ª<code>star</code>å§ã€‚æ‚¨çš„è‚¯å®šå¯¹æˆ‘æ¥è¯´æ˜¯æœ€å¤§çš„åŠ¨åŠ›ï¼ï¼</p>

    </div>

      
    <div class="post-nav">
      <div class="post-nav-item post-nav-next">
        
          <span>ã€ˆ </span>
          <a href="/ember-teach/models/%E5%85%83%E6%95%B0%E6%8D%AE/" rel="next" title="å…ƒæ•°æ®">
          å…ƒæ•°æ®
          </a>
        
      </div>
  
      <div class="post-nav-item post-nav-prev">
          
          <a href="/ember-teach/models/model%E7%9A%84%E5%85%B3%E8%81%94%E5%85%B3%E7%B3%BB%E5%A4%84%E7%90%86/" rel="prev" title="modelçš„å…³è”å…³ç³»å¤„ç†">
            modelçš„å…³è”å…³ç³»å¤„ç†
          </a>
          <span>ã€‰</span>
        
      </div>
    </div>
  
  </article>
  <div class="toc-container">
    
  <div id="toc" class="toc-article">
    <strong class="toc-title">ç›®å½•</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%EF%BC%8C%E7%AE%80%E4%BB%8B"><span class="toc-text">1ï¼Œç®€ä»‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%EF%BC%8C%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-text">2ï¼Œæ ¸å¿ƒæ¦‚å¿µ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%8Cstore"><span class="toc-text">1ï¼Œstore</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%8Cmodel"><span class="toc-text">2ï¼Œmodel</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%8Crecord"><span class="toc-text">3ï¼Œrecord</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%8Cadapter"><span class="toc-text">4ï¼Œadapter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%8Ccache"><span class="toc-text">5ï¼Œcache</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%EF%BC%8C%E6%9E%B6%E6%9E%84%E7%AE%80%E4%BB%8B"><span class="toc-text">3ï¼Œæ¶æ„ç®€ä»‹</span></a></li></ol>
  </div>


  </div>
</div>


<div class="copyright">
    <span>æœ¬ä½œå“é‡‡ç”¨</span>
    <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by/4.0/">çŸ¥è¯†å…±äº«ç½²å 4.0 å›½é™…è®¸å¯åè®®</a>
    <span>è¿›è¡Œè®¸å¯ã€‚ è½¬è½½æ—¶è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ã€‚</span>
</div>
<div class="share">

</div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css" />
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script type="text/javascript">
  var gitalk = new Gitalk({
    clientID: "48b3df0bf4ba1743e0a3",
    clientSecret: "4cf1e76de9e18b9ad0def477c36ab22059b152c8",
    repo: "ubuntuvim.github.io", // åšå®¢ä»“åº“åœ°å€
    owner: "ubuntuvim", // github ç”¨æˆ·å
    admin: ["ubuntuvim"], // github ç”¨æˆ·å
    perPage: 20,
    id: location.pathname.slice(0, 50), // æŸ¥æ‰¾ issus çš„æ¡ä»¶ï¼Œåé¢å°†å¯¹ id æœ‰é’ˆå¯¹é€»è¾‘
    title: 'modelç®€ä»‹',
    body: "ğŸš€ " + location.href + "\n\næ¬¢è¿é€šè¿‡ issues ç•™è¨€ ï¼Œäº’ç›¸äº¤æµå­¦ä¹ ğŸ˜Š", // åˆå§‹åŒ–åï¼Œissues çš„å†…å®¹
  });
  gitalk.render("gitalk-container");
</script>


    </div>

    

  </div>

  <a href="#" class="return-top">å›åˆ°é¡¶éƒ¨</a>
  
  <footer class="footer text-center">
    <div id="bottom-inner">
        <a class="bottom-item" href="https://github.com/ubuntuvim" target="_blank">GitHub</a> |
        <a class="bottom-item" href="https://hexo.io" target="_blank">Powered by hexo</a>
    </div>
</footer>


  <script src='https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js'></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize({theme: 'forest'});
    }
  </script>


<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

  
  <!-- scripts list from theme config.yml -->
  
    <script src="/js/zepto.min.js"></script>
  


<script>
  (function(window, document, undefined) {

    var timer = null;

    function returnTop() {
      cancelAnimationFrame(timer);
      timer = requestAnimationFrame(function fn() {
        var oTop = document.body.scrollTop || document.documentElement.scrollTop;
        if (oTop > 0) {
          document.body.scrollTop = document.documentElement.scrollTop = oTop - 50;
          timer = requestAnimationFrame(fn);
        } else {
          cancelAnimationFrame(timer);
        }
      });
    }

    var hearts = [];
    window.requestAnimationFrame = (function() {
      return window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.oRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        function(callback) {
          setTimeout(callback, 1000 / 60);
        }
    })();
    init();

    function init() {
      css(".heart{z-index:9999;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: absolute;}.heart:after{top: -5px;}.heart:before{left: -5px;}");
      attachEvent();
      gameloop();
      addMenuEvent();
    }

    function gameloop() {
      for (var i = 0; i < hearts.length; i++) {
        if (hearts[i].alpha <= 0) {
          document.body.removeChild(hearts[i].el);
          hearts.splice(i, 1);
          continue;
        }
        hearts[i].y--;
        hearts[i].scale += 0.004;
        hearts[i].alpha -= 0.013;
        hearts[i].el.style.cssText = "left:" + hearts[i].x + "px;top:" + hearts[i].y + "px;opacity:" + hearts[i].alpha + ";transform:scale(" + hearts[i].scale + "," + hearts[i].scale + ") rotate(45deg);background:" + hearts[i].color;
      }
      requestAnimationFrame(gameloop);
    }

    /**
     * ç»™logoè®¾ç½®ç‚¹å‡»äº‹ä»¶
     * 
     * - å›åˆ°é¡¶éƒ¨
     * - å‡ºç°çˆ±å¿ƒ
     */
    function attachEvent() {
      var old = typeof window.onclick === "function" && window.onclick;
      var logo = document.getElementById("logo");
      if (logo) {
        logo.onclick = function(event) {
          returnTop();
          old && old();
          createHeart(event);
        }
      }
      
    }

    function createHeart(event) {
      var d = document.createElement("div");
      d.className = "heart";
      hearts.push({
        el: d,
        x: event.clientX - 5,
        y: event.clientY - 5,
        scale: 1,
        alpha: 1,
        color: randomColor()
      });
      document.body.appendChild(d);
    }

    function css(css) {
      var style = document.createElement("style");
      style.type = "text/css";
      try {
        style.appendChild(document.createTextNode(css));
      } catch (ex) {
        style.styleSheet.cssText = css;
      }
      document.getElementsByTagName('head')[0].appendChild(style);
    }

    function randomColor() {
      // return "rgb(" + (~~(Math.random() * 255)) + "," + (~~(Math.random() * 255)) + "," + (~~(Math.random() * 255)) + ")";
      return "#F44336";
    }

    function addMenuEvent() {
      var menu = document.getElementById('menu-main-post');
      if (menu) {
        var toc = document.getElementById('toc');
        if (toc) {
          menu.onclick = function() {
            if (toc) {
              if (toc.style.display == 'block') {
                toc.style.display = 'none';
              } else {
                toc.style.display = 'block';
              }
            }
          };
        } else {
          menu.style.display = 'none';
        }
      }
    }

  })(window, document);
</script>

  



  
</body>
</html>
